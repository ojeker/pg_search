import ch.so.agi.gretl.tasks.*
import ch.so.agi.gretl.api.TransferSet

defaultTasks 'gpkgimport'

def db_uri = 'jdbc:postgresql://data-db/data'
def db_user = 'ddluser'
def db_pass = 'ddluser'

task gpkgimport(type: GpkgImport){
    database = [db_uri, db_user, db_pass]
    schemaName = 'public'
    srcTableName = 'adr'
    dstTableName = 'adresse'
    dataFile = "$buildDir/adr.gpkg"
}

/*
task deleteAppData(type: SqlExecutor, dependsOn: downloadAppXtf){
    database = [dbUriEdit, dbUserEdit, dbPwdEdit]
    sqlParameters = [dbSchema:schemaNameEdit]
    sqlFiles = ['deleteAppData.sql']
}

task writeToPub(type: Db2Db, dependsOn: importAppData){ 
    sourceDb = [dbUriEdit, dbUserEdit, dbPwdEdit]
    targetDb = [dbUriPub, dbUserPub, dbPwdPub]
    transferSets = [
        new TransferSet('abbaustelle.sql', 'afu_abbaustellen_pub_v2.abbaustelle', true)
    ];
}
*/